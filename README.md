# VERSEM
VERsatile Spectral Element Method

The main documentation is found on [versem.readthedocs.io](http://versem.readthedocs.io).

## Mini-Guide: Installation and Makefile


The easiest way to test and install all required software, test everything 
and compile the documentation is to run

``bash$ make all``

``make all`` installs all required software, unittests all tested software
in ``tests/`` and compiles the html documentation located in ``docs/`` 
(it does not compile the latexpdf automatically, our Jenkins CI server does not
provide a function that ``Sphinx`` needs, which is called ``latexmk``; hence, 
the automatic building of the documentation would fail).

There are a couple of other options using the ``Makefile``. 

- ``make init`` will install the required software using ``pip install``

- ``make docs`` will generate the automatic documentation of all modules 
  in the packages ``input``, ``src`` and ``tests`` using apidoc. The
  autogenerated ``.rst`` files are then used to compile ``html`` documentation.
  The ``html`` file is then located in the directory ``docs/build/html``.

- ``make latexpdf`` will generate a latex pdf containing the documentation.
  The document will then be located in the directory ``docs/build/latex``.

- ``make cleandocs`` cleans out both the auto-generated files as well as the
  compiled documents.

- ``make cleanresults`` cleans the results folder

- ``make clean`` cleans both results and documents.

## Configuration file

Location of the configuration file can be specified in the command line arguments. Default location is input/config.json

- ``mesh_file`` path to the mesh file

- ``material_file`` path to the material file

- ``ngll_x`` number of gll integration pointe in x direction

- ``ngll_y`` number of gll integration pointe in y direction

- ``ngll_z`` number of gll integration pointe in z direction

- ``dim`` number dimensions

- ``solver`` solver name (euler_explicit | rk2 | rk4 | ab2 | ab3 | ab4 | newmark)

- ``output_dir`` output directory

- ``boundary`` boundary type of each boundary (0: free surface | 1: internal boundary)

- ``nt`` number of timestep

- ``dt`` length of timestep (set to a negative value to compute dt automatically)

- ``sources`` defination of sources

    - ``stf_file`` python file that defines source time function

    - ``stf_args`` arguments that are passed to stf_file

    - ``location`` location of the source

    - ``term`` force direction in 2D

- ``stations`` defination of station locations

- ``trace_time_window`` time window of seismogram

- ``trace_interpolation`` interpolation factor of seismogram

- ``trace_type`` type of seismogram (u: displacement | v: velocity | a: acceleration)

- ``snap_xnpt`` number of interpolation points in x direction when plotting snapshop

- ``snap_type`` type of snapshot (u: displacement | v: velocity | a: acceleration)

- ``snap_comp`` component of snapshot (x: x direction | z: z direction | all: both)